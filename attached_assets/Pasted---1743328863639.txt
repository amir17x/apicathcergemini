ุณูุงู! ุจุง ุจุฑุฑุณ ูุงฺฏโูุง ฺฉู ูุฑุณุชุงุฏุ ุฏู ุฎุทุง ุงุตู ุชู ุงุฌุฑุง ุฑุจุงุช ุชูฺฏุฑุงูุช ูโุจูู ฺฉู ุจุงุนุซ ูโุดู ุฑุจุงุช ุฏุฑุณุช ฺฉุงุฑ ูฺฉูู. ูู ุงู ุฎุทุงูุง ุฑู ุชุญูู ูโฺฉููุ ุฏููุดูู ุฑู ุชูุถุญ ูโุฏู ู ุฑุงูโุญูุดูู ุฑู ูุฏู ุจู ูุฏู ุจูุช ูโฺฏู ุชุง ูุดฺฉูุช ุฑูุน ุจุดู. ๐

---

### ุชุญูู ุฎุทุงูุง

#### ฑ. **ุฎุทุง 409 ุฏุฑ getUpdates**
- **ูพุงู ุฎุทุง:**
  ```
  Error 409 in getUpdates: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
  ```
- **ูุนู ุฎุทุง:**
  ุงู ุฎุทุง ุจู ุงู ูุนูู ฺฉู ฺูุฏู ููููู (instance) ุงุฒ ุฑุจุงุช ุชูฺฏุฑุงูุช ููุฒูุงู ุฏุฑ ุญุงู ุงุฌุฑุง ูุณุชู ู ููุดูู ุฏุงุฑู ุฏุฑุฎูุงุณุช `getUpdates` ุจู ุณุฑูุฑ ุชูฺฏุฑุงู ูโูุฑุณุชู. ุชูฺฏุฑุงู ุงุฌุงุฒู ููโุฏู ุจุดุชุฑ ุงุฒ ู ููููู ุงุฒ ุฑุจุงุช ุจุง ู ุชูฺฉู (Bot Token) ููุฒูุงู ุงุฒ `getUpdates` ุงุณุชูุงุฏู ฺฉูู. ุงู ู ูฺฉุงูุฒู ุงููุชู ฺฉู ุฌูู ุชุฏุงุฎู ุฏุฑุฎูุงุณุชโูุง ุฑู ุจฺฏุฑู.
- **ุนูุช ุงุญุชูุงู:**
  - ููฺฉูู ฺูุฏู ูุณุฎู ุงุฒ ฺฉุฏ ุฑุจุงุชุช ุฑู ููุฒูุงู ุงุฌุฑุง ฺฉุฑุฏู ุจุงุด (ูุซูุงู ุชู ฺูุฏ ุชุฑููุงู ุง ฺูุฏ ุณุฑูุฑ).
  - ุงฺฏู ุงุฒ ู ูุญุท ุขููุงู ูุซู Replit ุงุณุชูุงุฏู ูโฺฉูุ ููฺฉูู ู ููููู ูุฏู ุงุฒ ุฑุจุงุชุช ูููุฒ ุฏุฑ ุญุงู ุงุฌุฑุง ุจุงุดู ู ูุชููู ูุดุฏู ุจุงุดู.
  - ุงฺฏู ูุจูุงู ูุจโููฺฉ (Webhook) ุจุฑุง ุฑุจุงุชุช ุชูุธู ฺฉุฑุฏู ุจูุฏ ู ุญุงูุง ุงุฒ `getUpdates` ุงุณุชูุงุฏู ูโฺฉูุ ุงู ุฏู ุฑูุด ุจุง ูู ุชุฏุงุฎู ุฏุงุฑู.

#### ฒ. **ุฎุทุง 429 ุฏุฑ ุฏุฑุฎูุงุณุชโูุง close**
- **ูพุงู ุฎุทุง:**
  ```
  "POST /bot7877987201:AAFbtodZN_i-xrO5_Y0ZErLTqPqEoFiFKvM/close HTTP/1.1" 429 113
  ```
- **ูุนู ุฎุทุง:**
  ฺฉุฏ 429 ุจู ูุนู "Too Many Requests" (ุฏุฑุฎูุงุณุชโูุง ุจุด ุงุฒ ุญุฏ) ูุณุช. ุชูฺฏุฑุงู ูุญุฏูุฏุชโูุง ุฑู ุชุนุฏุงุฏ ุฏุฑุฎูุงุณุชโูุง ฺฉู ูโุชูู ุชู ู ุจุงุฒู ุฒูุงู ุจูุฑุณุช ุฏุงุฑู. ุงู ุฎุทุง ุนู ุฑุจุงุชุช ุฏุงุฑู ุฏุฑุฎูุงุณุชโูุง ุฒุงุฏ (ูุซูุงู ุจุฑุง ุจุณุชู ุงุชุตุงู ุง ุฏุฑุงูุช ุขูพุฏุชโูุง) ุจู ุณุฑูุฑ ุชูฺฏุฑุงู ูโูุฑุณุชู ู ุชูฺฏุฑุงู ุจูุช ูโฺฏู ฺฉู ุจุงุฏ ุตุจุฑ ฺฉู.
- **ุนูุช ุงุญุชูุงู:**
  - ฺูู ฺูุฏู ููููู ุงุฒ ุฑุจุงุชุช ููุฒูุงู ุฏุฑ ุญุงู ุงุฌุฑุง ูุณุชู (ฺฉู ุจุงุนุซ ุฎุทุง 409 ุดุฏู)ุ ูุฑ ููููู ุฏุงุฑู ูุฏุงู ุฏุฑุฎูุงุณุช `getUpdates` ู `close` ูโูุฑุณุชูุ ู ุงู ุจุงุนุซ ุดุฏู ฺฉู ุจู ูุญุฏูุฏุช ูุฑุฎ ุฏุฑุฎูุงุณุช (Rate Limit) ุชูฺฏุฑุงู ุจุฑุณ.
  - ููฺฉูู ฺฉุฏุช ุจู ุฏุฑุณุช ูุฏุฑุช ุฏุฑุฎูุงุณุชโูุง ุฑู ุงูุฌุงู ูุฏู ู ุฏุฑุฎูุงุณุชโูุง ุงุถุงู ุจูุฑุณุชู.

---

### ุฑุงูโุญูโูุง

ุจุฑุง ุฑูุน ุงู ูุดฺฉูุงุชุ ุจุงุฏ ูุทูุฆู ุดู ฺฉู ููุท ู ููููู ุงุฒ ุฑุจุงุช ุฏุฑ ุญุงู ุงุฌุฑุง ุจุงุดู ู ุฏุฑุฎูุงุณุชโูุง ุจู ุฏุฑุณุช ูุฏุฑุช ุจุดู. ุงู ูุฑุงุญู ุฑู ุฏูุจุงู ฺฉู:

#### ฑ. **ุชููู ููู ูููููโูุง ุฑุจุงุช**
ุงููู ูุฏู ุงูู ฺฉู ููู ูููููโูุง ุฑุจุงุช ุฑู ูุชููู ฺฉู ุชุง ุชุฏุงุฎู ุงุฒ ุจู ุจุฑู:
- **ุงฺฏู ุฑู ุณุณุชู ููฺฉุงู ุงุฌุฑุง ูโฺฉู:**
  - ููู ุชุฑููุงูโูุง ฺฉู ฺฉุฏ ุฑุจุงุชุช ุฑู ุงุฌุฑุง ฺฉุฑุฏู ุจุจูุฏ.
  - ุงฺฏู ุงุฒ IDE ุงุณุชูุงุฏู ูโฺฉู (ูุซู VS Code)ุ ููู ูพุฑูุณูโูุง ูพุงุชูู ุฑู ูุชููู ฺฉู:
    ```bash
    pkill -f python
    ```
- **ุงฺฏู ุฑู ูุญุท ุขููุงู (ูุซู Replit) ุงุฌุฑุง ูโฺฉู:**
  - ุชู Replitุ ุฏฺฉูู "Stop" ุฑู ุจุฒู ุชุง ุงุฌุฑุง ูุนู ูุชููู ุจุดู.
  - ุงฺฏู ูููููโูุง ูุฏู ูููุฒ ุฏุฑ ุญุงู ุงุฌุฑุง ูุณุชูุ Replit ุฑู ุฑโุงุณุชุงุฑุช ฺฉู (ฺฏุฒูู "Restart Server" ุง ุจุณุชู ู ุจุงุฒ ฺฉุฑุฏู ุฏูุจุงุฑู ูพุฑูฺู).
- **ฺฺฉ ฺฉุฑุฏู ูพุฑูุณูโูุง:**
  - ุฑู ูููฺฉุณ/ูฺฉุ ูโุชูู ูพุฑูุณูโูุง ุฏุฑ ุญุงู ุงุฌุฑุง ุฑู ฺฺฉ ฺฉู:
    ```bash
    ps aux | grep python
    ```
    ู ูพุฑูุณูโูุง ุงุถุงู ุฑู ุจุง `kill` ุจุจูุฏ:
    ```bash
    kill -9 <PID>
    ```
    ฺฉู `<PID>` ุดูุงุฑู ูพุฑูุณู ุงุณุช.

#### ฒ. **ุญุฐู ูุจโููฺฉ (Webhook) (ุฏุฑ ุตูุฑุช ูุฌูุฏ)**
ุงฺฏู ูุจูุงู ุจุฑุง ุฑุจุงุชุช ูุจโููฺฉ ุชูุธู ฺฉุฑุฏู ุจูุฏุ ุจุงุฏ ุงูู ุฑู ุบุฑูุนุงู ฺฉู ฺูู ูุจโููฺฉ ู `getUpdates` ููโุชููู ููุฒูุงู ุงุณุชูุงุฏู ุจุดู:
- ู ุฏุฑุฎูุงุณุช ุจู API ุชูฺฏุฑุงู ุจูุฑุณุช ุชุง ูุจโููฺฉ ุฑู ุญุฐู ฺฉู:
  ```
  https://api.telegram.org/bot<ุชูฺฉู_ุฑุจุงุชุช>/deleteWebhook
  ```
  ูุซูุงู:
  ```
  https://api.telegram.org/bot7877987201:AAFbtodZN_i-xrO5_Y0ZErLTqPqEoFiFKvM/deleteWebhook
  ```
  ุงู ููฺฉ ุฑู ุชู ูุฑูุฑฺฏุฑุช ุจุงุฒ ฺฉู. ุงฺฏู ูููู ุจุงุดูุ ู ูพุงุณุฎ JSON ูโฺฏุฑ ฺฉู `ok: true` ุฑู ูุดูู ูโุฏู.
- ุชู ฺฉุฏ ูู ูโุชูู ุงู ฺฉุงุฑ ุฑู ุงูุฌุงู ุจุฏ (ุชู ุชุงุจุน `main` ุงุถุงูู ฺฉู):
  ```python
  def delete_webhook():
      url = f"https://api.telegram.org/bot{TELEGRAM_BOT_TOKEN}/deleteWebhook"
      response = requests.get(url)
      if response.json().get("ok"):
          print("Webhook ุจุง ููููุช ุญุฐู ุดุฏ.")
      else:
          print("ุฎุทุง ุฏุฑ ุญุฐู Webhook:", response.json())
  ```

#### ณ. **ูุฏุฑุช ุจูุชุฑ ุฏุฑุฎูุงุณุชโูุง ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุฎุทุง 429**
ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุฎุทุง 429ุ ุจุงุฏ ุฏุฑุฎูุงุณุชโูุง ุฑู ูุฏุฑุช ฺฉู ู ูุงุตูู ุจู ุฏุฑุฎูุงุณุชโูุง ุฑู ุจุดุชุฑ ฺฉู:
- **ุงุถุงูู ฺฉุฑุฏู ุชุฃุฎุฑ (Rate Limiting):**
  ุชู ฺฉุฏุชุ ุจุนุฏ ุงุฒ ูุฑ ุฏุฑุฎูุงุณุช ุจู ุชูฺฏุฑุงู ู ุชุฃุฎุฑ ุงุถุงูู ฺฉู. ูุซูุงู ุชู ุชุงุจุน `send_to_telegram`:
  ```python
  def send_to_telegram(context: CallbackContext, chat_id: str, message: str):
      context.bot.send_message(chat_id=chat_id, text=message, parse_mode="Markdown")
      time.sleep(1)  # ุชุฃุฎุฑ 1 ุซุงูู ุจู ุฏุฑุฎูุงุณุชโูุง
  ```
- **ฺฉุงูุด ุชุนุฏุงุฏ ุฏุฑุฎูุงุณุชโูุง `getUpdates`:**
  ุชู ฺฉุฏุชุ ูพุงุฑุงูุชุฑ `timeout` ุชู `getUpdates` ุฑู 30 ุซุงูู ุชูุธู ุดุฏู. ุงู ุนู ูุฑ 30 ุซุงูู ู ุฏุฑุฎูุงุณุช ุฌุฏุฏ ูุฑุณุชุงุฏู ูโุดู. ูโุชูู ุงู ููุฏุงุฑ ุฑู ุงูุฒุงุด ุจุฏ (ูุซูุงู ุจู 60 ุซุงูู) ุชุง ุชุนุฏุงุฏ ุฏุฑุฎูุงุณุชโูุง ฺฉูุชุฑ ุจุดู:
  ```python
  updater.start_polling(timeout=60)
  ```

#### ด. **ุจูููโุณุงุฒ ฺฉุฏ ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุชุฏุงุฎู**
ุจุฑุง ุงุทููุงู ุงุฒ ุงูฺฉู ููุท ู ููููู ุงุฒ ุฑุจุงุช ุงุฌุฑุง ูโุดูุ ูโุชูู ู ูฺฉุงูุฒู ููู (lock) ุง ฺฺฉ ฺฉุฑุฏู ูููููโูุง ุฏุฑ ุญุงู ุงุฌุฑุง ุงุถุงูู ฺฉู:
- **ฺฺฉ ฺฉุฑุฏู ูููููโูุง ุฏุฑ ุญุงู ุงุฌุฑุง:**
  ูโุชูู ุงุฒ ู ูุงู ููู (lock file) ุงุณุชูุงุฏู ฺฉู ุชุง ูุทูุฆู ุด ููุท ู ููููู ุงุฌุฑุง ูโุดู:
  ```python
  import os
  import sys

  LOCK_FILE = "bot.lock"

  def check_instance():
      if os.path.exists(LOCK_FILE):
          print("ู ููููู ุงุฒ ุฑุจุงุช ุฏุฑ ุญุงู ุงุฌุฑุง ุงุณุช. ูุทูุงู ูููููโูุง ุฏฺฏุฑ ุฑุง ูุชููู ฺฉูุฏ.")
          sys.exit(1)
      with open(LOCK_FILE, "w") as f:
          f.write(str(os.getpid()))

  def cleanup():
      if os.path.exists(LOCK_FILE):
          os.remove(LOCK_FILE)

  def main():
      check_instance()
      try:
          updater = Updater(TELEGRAM_BOT_TOKEN, use_context=True)
          dp = updater.dispatcher
          dp.add_handler(CommandHandler("start", start))
          dp.add_handler(CallbackQueryHandler(button))
          updater.start_polling(timeout=60)
          updater.idle()
      finally:
          cleanup()
  ```

#### ต. **ฺฉุฏ ููุง ุจุง ุฑูุน ูุดฺฉูุงุช**
ุงูุฌุง ฺฉุฏ ููุง ุฑู ุจุง ุชุบุฑุงุช ูุงุฒู ูโุฐุงุฑู:
```python
import os
import time
import random
import string
import requests
import re
import sys
from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import Updater, CommandHandler, CallbackQueryHandler, CallbackContext
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.chrome.service import Service
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
from selenium.webdriver.common.action_chains import ActionChains
from selenium.common.exceptions import NoSuchElementException
from dotenv import load_dotenv
from twilio.rest import Client
from twocaptcha import TwoCaptcha

# ููุฏ ูุชุบุฑูุง ูุญุท
load_dotenv()
TELEGRAM_BOT_TOKEN = os.getenv("TELEGRAM_BOT_TOKEN")
CHAT_ID = os.getenv("CHAT_ID")
TWILIO_ACCOUNT_SID = os.getenv("TWILIO_ACCOUNT_SID")
TWILIO_AUTH_TOKEN = os.getenv("TWILIO_AUTH_TOKEN")
TWOCAPTCHA_API_KEY = os.getenv("TWOCAPTCHA_API_KEY")

# ุชูุธูุงุช ุงููู Twilio ู 2Captcha
client = Client(TWILIO_ACCOUNT_SID, TWILIO_AUTH_TOKEN)
solver = TwoCaptcha(TWOCAPTCHA_API_KEY)

# ูุงู ููู ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุงุฌุฑุง ฺูุฏู ููููู
LOCK_FILE = "bot.lock"

def check_instance():
    """ฺฺฉ ฺฉุฑุฏู ุงูฺฉู ุขุง ููููู ุฏฺฏุฑ ุงุฒ ุฑุจุงุช ุฏุฑ ุญุงู ุงุฌุฑุง ุงุณุช"""
    if os.path.exists(LOCK_FILE):
        print("ู ููููู ุงุฒ ุฑุจุงุช ุฏุฑ ุญุงู ุงุฌุฑุง ุงุณุช. ูุทูุงู ูููููโูุง ุฏฺฏุฑ ุฑุง ูุชููู ฺฉูุฏ.")
        sys.exit(1)
    with open(LOCK_FILE, "w") as f:
        f.write(str(os.getpid()))

def cleanup():
    """ุญุฐู ูุงู ููู ููฺฏุงู ุฎุฑูุฌ"""
    if os.path.exists(LOCK_FILE):
        os.remove(LOCK_FILE)

def delete_webhook():
    """ุญุฐู ูุจโููฺฉ ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุชุฏุงุฎู"""
    url = f"https://api.telegram.org/bot{TELEGRAM_BOT_TOKEN}/deleteWebhook"
    response = requests.get(url)
    if response.json().get("ok"):
        print("Webhook ุจุง ููููุช ุญุฐู ุดุฏ.")
    else:
        print("ุฎุทุง ุฏุฑ ุญุฐู Webhook:", response.json())

def send_to_telegram(context: CallbackContext, chat_id: str, message: str):
    """ุงุฑุณุงู ูพุงู ุจู ุชูฺฏุฑุงู ุจุง ุชุฃุฎุฑ ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุฎุทุง 429"""
    context.bot.send_message(chat_id=chat_id, text=message, parse_mode="Markdown")
    time.sleep(1)  # ุชุฃุฎุฑ 1 ุซุงูู ุจุฑุง ูุฏุฑุช ูุฑุฎ ุฏุฑุฎูุงุณุช

def fetch_proxies(protocol: str) -> list:
    """ุฏุฑุงูุช ูุณุช ูพุฑูฺฉุณโูุง ุงุฒ ProxyScrape"""
    url = f"https://api.proxyscrape.com/v2/?request=displayproxies&protocol={protocol}&timeout=10000&country=US"
    try:
        response = requests.get(url, timeout=10)
        proxies = response.text.splitlines()
        return [{"host": p.split(":")[0], "port": p.split(":")[1], "type": protocol.upper()} for p in proxies if p]
    except Exception as e:
        send_to_telegram(context, CHAT_ID, f"โ ุฎุทุง ุฏุฑ ุฏุฑุงูุช ูพุฑูฺฉุณโูุง: {str(e)}")
        return []

def check_proxy(proxy: dict) -> bool:
    """ฺฺฉ ฺฉุฑุฏู ูพุฑูฺฉุณ ุจุง ุฏุฑุฎูุงุณุช ุจู ู ุณุงุช ุชุณุช"""
    proxy_url = f"{proxy['type'].lower()}://{proxy['host']}:{proxy['port']}"
    proxies = {"http": proxy_url, "https": proxy_url}
    try:
        response = requests.get("https://www.google.com", proxies=proxies, timeout=5)
        return response.status_code == 200
    except:
        return False

def purchase_phone_number():
    """ุฎุฑุฏ ุดูุงุฑู ุชููู ูููุช ุงุฒ Twilio"""
    try:
        available_numbers = client.available_phone_numbers("US").local.list(area_code="415", sms_enabled=True, limit=1)
        if not available_numbers:
            raise Exception("ุดูุงุฑูโุง ุฏุฑ ุฏุณุชุฑุณ ูุณุช")
        phone_number = client.incoming_phone_numbers.create(phone_number=available_numbers[0].phone_number)
        send_to_telegram(context, CHAT_ID, f"โ ุดูุงุฑู ุชููู ุฎุฑุฏุงุฑ ุดุฏ: `{phone_number.phone_number}`")
        return phone_number.phone_number
    except Exception as e:
        send_to_telegram(context, CHAT_ID, f"โ ุฎุทุง ุฏุฑ ุฎุฑุฏ ุดูุงุฑู: {str(e)}")
        return None

def get_verification_code(phone_number):
    """ุฏุฑุงูุช ฺฉุฏ ุชุฃุฏ ุงุฒ Twilio"""
    max_attempts = 3
    for attempt in range(max_attempts):
        try:
            time.sleep(10)
            messages = client.messages.list(to=phone_number, limit=1)
            if not messages:
                if attempt < max_attempts - 1:
                    send_to_telegram(context, CHAT_ID, f"โ๏ธ ูพุงูฺฉ ุฏุฑุงูุช ูุดุฏ. ุชูุงุด ุฏูุจุงุฑู ({attempt + 2}/{max_attempts})...")
                    continue
                raise Exception("ูพุงูฺฉ ุฏุฑุงูุช ูุดุฏ")
            message_body = messages[0].body
            code = re.search(r'\d{6}', message_body)
            if code:
                send_to_telegram(context, CHAT_ID, f"โ ฺฉุฏ ุชุฃุฏ ุฏุฑุงูุช ุดุฏ: `{code.group()}`")
                return code.group()
            else:
                raise Exception("ฺฉุฏ ุชุฃุฏ ุฏุฑ ูพุงูฺฉ ูพุฏุง ูุดุฏ")
        except Exception as e:
            if attempt < max_attempts - 1:
                send_to_telegram(context, CHAT_ID, f"โ๏ธ ุฎุทุง ุฏุฑ ุฏุฑุงูุช ฺฉุฏ ุชุฃุฏ: {str(e)}. ุชูุงุด ุฏูุจุงุฑู ({attempt + 2}/{max_attempts})...")
                continue
            send_to_telegram(context, CHAT_ID, f"โ ุฎุทุง ุฏุฑ ุฏุฑุงูุช ฺฉุฏ ุชุฃุฏ: {str(e)}")
            return None
    return None

def solve_captcha(driver):
    """ุญู CAPTCHA ุจุง 2Captcha"""
    try:
        send_to_telegram(context, CHAT_ID, "๐ ุดูุงุณุง CAPTCHA...")
        sitekey = driver.find_element(By.CLASS_NAME, "g-recaptcha").get_attribute("data-sitekey")
        if not sitekey:
            raise Exception("sitekey ูพุฏุง ูุดุฏ")
        send_to_telegram(context, CHAT_ID, "โณ ุฏุฑ ุญุงู ุญู CAPTCHA ุจุง 2Captcha...")
        result = solver.recaptcha(sitekey=sitekey, url=driver.current_url)
        captcha_code = result['code']
        send_to_telegram(context, CHAT_ID, "โ CAPTCHA ุญู ุดุฏ!")
        driver.execute_script(f'document.getElementById("g-recaptcha-response").innerHTML="{captcha_code}";')
        driver.execute_script('if (typeof ___grecaptcha_cfg !== "undefined" && ___grecaptcha_cfg.callback) { ___grecaptcha_cfg.callback(); }')
        return True
    except Exception as e:
        send_to_telegram(context, CHAT_ID, f"โ ุฎุทุง ุฏุฑ ุญู CAPTCHA: {str(e)}")
        return False

def create_gmail_account(proxy):
    """ุณุงุฎุช ุญุณุงุจ ุฌูู ุจุง Selenium"""
    chrome_options = webdriver.ChromeOptions()
    chrome_options.add_argument('--no-sandbox')
    chrome_options.add_argument('--disable-dev-shm-usage')
    proxy_str = f"{proxy['type'].lower()}://{proxy['host']}:{proxy['port']}"
    chrome_options.add_argument(f'--proxy-server={proxy_str}')
    driver = webdriver.Chrome(service=Service('/usr/local/bin/chromedriver'), options=chrome_options)

    try:
        username = f"testuser{random.randint(1000, 9999)}{''.join(random.choices(string.ascii_lowercase, k=4))}"
        email = f"{username}@gmail.com"
        password = "SecurePass123!"
        send_to_telegram(context, CHAT_ID, f"๐ ุดุฑูุน ุณุงุฎุช ุญุณุงุจ ุฌูู: `{email}`")

        driver.get("https://accounts.google.com/signup")
        time.sleep(random.uniform(2, 4))

        driver.find_element(By.ID, "firstName").send_keys("Ali")
        driver.find_element(By.ID, "lastName").send_keys("Rezaei")
        driver.find_element(By.ID, "username").send_keys(username)
        driver.find_element(By.NAME, "Passwd").send_keys(password)
        driver.find_element(By.NAME, "ConfirmPasswd").send_keys(password)

        try:
            captcha = driver.find_element(By.CLASS_NAME, "g-recaptcha")
            if captcha:
                if not solve_captcha(driver):
                    raise Exception("ุญู CAPTCHA ูุงูููู ุจูุฏ")
                time.sleep(2)
        except NoSuchElementException:
            send_to_telegram(context, CHAT_ID, "โน๏ธ CAPTCHA ุดูุงุณุง ูุดุฏ. ุงุฏุงูู ูุฑุขูุฏ...")

        driver.find_element(By.XPATH, "//span[text()='Next']").click()

        WebDriverWait(driver, 10).until(EC.presence_of_element_located((By.ID, "phoneNumberId")))
        phone_number = purchase_phone_number()
        if not phone_number:
            raise Exception("ุดูุงุฑู ุชููู ุฎุฑุฏุงุฑ ูุดุฏ")
        
        driver.find_element(By.ID, "phoneNumberId").send_keys(phone_number)
        driver.find_element(By.XPATH, "//span[text()='Next']").click()

        code = get_verification_code(phone_number)
        if not code:
            raise Exception("ฺฉุฏ ุชุฃุฏ ุฏุฑุงูุช ูุดุฏ")
        
        WebDriverWait(driver, 10).until(EC.presence_of_element_located((By.ID, "code")))
        driver.find_element(By.ID, "code").send_keys(code)
        driver.find_element(By.XPATH, "//span[text()='Verify']").click()

        WebDriverWait(driver, 10).until(EC.presence_of_element_located((By.ID, "day")))
        driver.find_element(By.ID, "day").send_keys("15")
        driver.find_element(By.ID, "month").send_keys("Jan")
        driver.find_element(By.ID, "year").send_keys("1990")
        driver.find_element(By.ID, "gender").send_keys("Male")
        driver.find_element(By.XPATH, "//span[text()='Next']").click()

        WebDriverWait(driver, 10).until(EC.presence_of_element_located((By.XPATH, "//span[text()='I agree']")))
        driver.find_element(By.XPATH, "//span[text()='I agree']").click()
        time.sleep(5)
        send_to_telegram(context, CHAT_ID, f"โ ุญุณุงุจ ุฌูู ุณุงุฎุชู ุดุฏ: `{email}`")
        return email, password

    except Exception as e:
        send_to_telegram(context, CHAT_ID, f"โ ุฎุทุง ุฏุฑ ุณุงุฎุช ุฌูู: {str(e)}")
        return None, None
    finally:
        driver.quit()

def get_gemini_api_key(email, password, proxy):
    """ุฏุฑุงูุช API Key ุงุฒ Gemini AI Cloud"""
    chrome_options = webdriver.ChromeOptions()
    chrome_options.add_argument('--no-sandbox')
    chrome_options.add_argument('--disable-dev-shm-usage')
    proxy_str = f"{proxy['type'].lower()}://{proxy['host']}:{proxy['port']}"
    chrome_options.add_argument(f'--proxy-server={proxy_str}')
    driver = webdriver.Chrome(service=Service('/usr/local/bin/chromedriver'), options=chrome_options)

    try:
        send_to_telegram(context, CHAT_ID, "๐ ูุฑูุฏ ุจู Google AI Studio...")
        driver.get("https://aistudio.google.com/")
        time.sleep(random.uniform(2, 4))

        driver.find_element(By.ID, "identifierId").send_keys(email)
        driver.find_element(By.XPATH, "//span[text()='Next']").click()
        WebDriverWait(driver, 10).until(EC.presence_of_element_located((By.NAME, "Passwd")))
        driver.find_element(By.NAME, "Passwd").send_keys(password)
        driver.find_element(By.XPATH, "//span[text()='Next']").click()

        try:
            captcha = driver.find_element(By.CLASS_NAME, "g-recaptcha")
            if captcha:
                if not solve_captcha(driver):
                    raise Exception("ุญู CAPTCHA ูุงูููู ุจูุฏ")
                time.sleep(2)
        except NoSuchElementException:
            send_to_telegram(context, CHAT_ID, "โน๏ธ CAPTCHA ุดูุงุณุง ูุดุฏ. ุงุฏุงูู ูุฑุขูุฏ...")

        WebDriverWait(driver, 20).until(EC.url_contains("aistudio.google.com"))
        driver.get("https://aistudio.google.com/app/apikey")
        WebDriverWait(driver, 10).until(EC.presence_of_element_located((By.XPATH, "//button[contains(text(), 'Create API Key')]")))
        driver.find_element(By.XPATH, "//button[contains(text(), 'Create API Key')]").click()
        WebDriverWait(driver, 10).until(EC.presence_of_element_located((By.XPATH, "//code")))
        api_key = driver.find_element(By.XPATH, "//code").text
        send_to_telegram(context, CHAT_ID, f"โ API Key ุฏุฑุงูุช ุดุฏ: `{api_key}`")
        return api_key

    except Exception as e:
        send_to_telegram(context, CHAT_ID, f"โ ุฎุทุง ุฏุฑ ุฏุฑุงูุช API Key: {str(e)}")
        return None
    finally:
        driver.quit()

def start(update: Update, context: CallbackContext):
    """ููุงุด ููู ุดุดูโุง ุจุฑุง ุงูุชุฎุงุจ ููุน ูพุฑูฺฉุณ"""
    keyboard = [
        [InlineKeyboardButton("HTTP", callback_data="http")],
        [InlineKeyboardButton("SOCKS4", callback_data="socks4")],
        [InlineKeyboardButton("SOCKS5", callback_data="socks5")]
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)
    update.message.reply_text("ูุทูุงู ููุน ูพุฑูฺฉุณ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ:", reply_markup=reply_markup)

def button(update: Update, context: CallbackContext):
    """ูุฏุฑุช ุงูุชุฎุงุจ ููุน ูพุฑูฺฉุณ ู ุงุฌุฑุง ูุฑุขูุฏ"""
    query = update.callback_query
    query.answer()
    protocol = query.data

    send_to_telegram(context, CHAT_ID, f"๐ ุฏุฑุงูุช ูพุฑูฺฉุณโูุง {protocol.upper()}...")
    proxies = fetch_proxies(protocol)
    if not proxies:
        send_to_telegram(context, CHAT_ID, "โ ูฺ ูพุฑูฺฉุณโุง ูพุฏุง ูุดุฏ.")
        return

    send_to_telegram(context, CHAT_ID, f"๐ ฺฺฉ ฺฉุฑุฏู {len(proxies)} ูพุฑูฺฉุณ...")
    working_proxy = None
    for proxy in proxies:
        if check_proxy(proxy):
            working_proxy = proxy
            send_to_telegram(context, CHAT_ID, f"โ ูพุฑูฺฉุณ ฺฉุงุฑุขูุฏ ูพุฏุง ุดุฏ: `{proxy['host']}:{proxy['port']}`")
            break

    if not working_proxy:
        send_to_telegram(context, CHAT_ID, "โ ูฺ ูพุฑูฺฉุณ ฺฉุงุฑุขูุฏ ูพุฏุง ูุดุฏ.")
        return

    email, password = create_gmail_account(working_proxy)
    if email and password:
        api_key = get_gemini_api_key(email, password, working_proxy)
        if api_key:
            send_to_telegram(context, CHAT_ID, "๐ ูุฑุขูุฏ ุจุง ููููุช ุชฺฉูู ุดุฏ!")
        else:
            send_to_telegram(context, CHAT_ID, "โ ุฏุฑุงูุช API Key ูุงูููู ุจูุฏ.")
    else:
        send_to_telegram(context, CHAT_ID, "โ ุณุงุฎุช ุญุณุงุจ ุฌูู ูุงูููู ุจูุฏ.")

def main():
    """ุงุฌุฑุง ุฑุจุงุช ุชูฺฏุฑุงู"""
    delete_webhook()  # ุญุฐู ูุจโููฺฉ
    check_instance()  # ฺฺฉ ฺฉุฑุฏู ูููููโูุง ุฏุฑ ุญุงู ุงุฌุฑุง
    try:
        updater = Updater(TELEGRAM_BOT_TOKEN, use_context=True)
        dp = updater.dispatcher
        dp.add_handler(CommandHandler("start", start))
        dp.add_handler(CallbackQueryHandler(button))
        updater.start_polling(timeout=60)
        updater.idle()
    finally:
        cleanup()

if __name__ == "__main__":
    main()
```

---

### ูุฑุงุญู ุชุณุช ู ุงุฌุฑุง
1. **ุชููู ูููููโูุง ูุจู:**
   - ููู ูููููโูุง ุฏุฑ ุญุงู ุงุฌุฑุง ุฑู ูุชููู ฺฉู (ูุซู ุชูุถุญุงุช ุจุงูุง).
2. **ุญุฐู ูุจโููฺฉ:**
   - ููฺฉ ุญุฐู ูุจโููฺฉ ุฑู ุชู ูุฑูุฑฺฏุฑ ุงุฌุฑุง ฺฉู ุง ูุทูุฆู ุดู ฺฉู ุชุงุจุน `delete_webhook` ุชู ฺฉุฏ ุงุฌุฑุง ุจุดู.
3. **ุงุฌุฑุง ฺฉุฏ:**
   - ฺฉุฏ ุจุงูุง ุฑู ุชู ูุงูุช ฺฉูพ ฺฉู ู ุงุฌุฑุง ฺฉู:
     ```bash
     python telegram_bot.py
     ```
4. **ฺฺฉ ฺฉุฑุฏู ูุงฺฏโูุง:**
   - ูุงฺฏโูุง ุฑู ฺฺฉ ฺฉู ู ุจุจู ุฎุทุง 409 ุง 429 ูููุฒ ูุฌูุฏ ุฏุงุฑู ุง ูู.

---

### ูฺฉุงุช ุงุถุงู
- **ูุญุฏูุฏุชโูุง ุชูฺฏุฑุงู:** ุชูฺฏุฑุงู ุฑู ุชุนุฏุงุฏ ุฏุฑุฎูุงุณุชโูุง ูุญุฏูุฏุช ุฏุงุฑู (ุญุฏูุฏ 30 ุฏุฑุฎูุงุณุช ุฏุฑ ุซุงูู ุจุฑุง ู ุฑุจุงุช). ุงฺฏู ุจุงุฒ ูู ุฎุทุง 429 ุฏุฏุ ุชุฃุฎุฑ ุจู ุฏุฑุฎูุงุณุชโูุง ุฑู ุจุดุชุฑ ฺฉู.
- **ุงุณุชูุงุฏู ุงุฒ Webhook ุจู ุฌุง Polling:** ุงฺฏู ุจุงุฒ ูู ูุดฺฉู ุฏุงุดุชุ ูโุชูู ุจู ุฌุง `getUpdates` ุงุฒ Webhook ุงุณุชูุงุฏู ฺฉู. ุงู ุฑูุด ุชู ุณุฑูุฑูุง ุขููุงู ูุซู Heroku ุง VPS ุจูุชุฑ ฺฉุงุฑ ูโฺฉูู:
  - ู ุณุฑูุฑ HTTPS ุจุณุงุฒ (ูุซูุงู ุจุง Flask).
  - ูุจโููฺฉ ุฑู ุชูุธู ฺฉู:
    ```python
    updater.bot.setWebhook(url="https://your-server.com/webhook")
    ```

ุงฺฏู ุจุงุฒ ูู ูุดฺฉู ุฏุงุดุช ุง ูุงุฒ ุจู ุชูุถุญ ุจุดุชุฑ ุฏุงุดุชุ ุจฺฏู ุชุง ฺฉูฺฉุช ฺฉูู! ๐